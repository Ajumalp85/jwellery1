<div class="group flex flex-col gap-3">
  <div class="aspect-[3/4] w-full overflow-hidden rounded-lg bg-gray-100 relative">
    <button class="absolute top-2 right-2 z-10 rounded-full bg-white/80 p-1.5 text-gray-900 shadow-sm hover:bg-white transition-colors">
      <span class="material-symbols-outlined text-[20px]">favorite</span>
    </button>
    
    <a href="{{ product.url }}" class="block h-full">
      {%- if product.featured_image != blank -%}
        <img 
          src="{{ product.featured_image | image_url: width: 600 }}" 
          alt="{{ product.title | escape }}"
          class="h-full w-full object-cover transition-transform duration-300 group-hover:scale-105"
          width="600"
          height="800"
        >
      {%- else -%}
        <div class="h-full w-full bg-cover bg-center transition-transform duration-300 group-hover:scale-105" style="background-image: url('{{ fallback_image }}');"></div>
      {%- endif -%}
    </a>
    
    {%- if product.available -%}
      <form action="/cart/add" method="post" enctype="multipart/form-data">
        <input type="hidden" name="id" value="{{ product.variants.first.id }}">
        <button type="submit" class="absolute bottom-4 left-4 right-4 translate-y-full rounded-lg bg-surface-light/95 py-2.5 text-sm font-bold text-[#0e191b] opacity-0 shadow-lg transition-all duration-300 group-hover:translate-y-0 group-hover:opacity-100 hover:!bg-primary hover:text-white">
          Add to Cart
        </button>
      </form>
    {%- else -%}
      <button disabled class="absolute bottom-4 left-4 right-4 translate-y-full rounded-lg bg-gray-300 py-2.5 text-sm font-bold text-gray-500 opacity-0 shadow-lg transition-all duration-300 group-hover:translate-y-0 group-hover:opacity-100">
        Sold Out
      </button>
    {%- endif -%}
  </div>
  
  <div>
    <h3 class="font-medium text-[#0e191b] dark:text-white line-clamp-1">
      <a href="{{ product.url }}">{{ product.title | default: fallback_title }}</a>
    </h3>
    <div class="mt-1 flex items-center gap-2">
      <span class="font-bold text-[#0e191b] dark:text-white">{{ product.price | default: fallback_price | money }}</span>
      {%- if product.compare_at_price > product.price -%}
        <span class="text-sm text-gray-500 line-through">{{ product.compare_at_price | money }}</span>
      {%- endif -%}
    </div>
  </div>
</div>
